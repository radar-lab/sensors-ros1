<launch>
	<arg name="show_image_view" default="false" />
	<arg name="show_rviz" default="true" />
	<arg name="use_camera" default="false" />
	<arg name="use_radar" default="false" />
	<arg name="use_lidar" default="false" />
	<arg name="radar_cfg" default="" />
	<arg name="lidar_model" default="Pandar40P" />
	<arg name="lidar_correction_file" default="" />
	<arg name="lidar_ip" deafult="192.168.1.201" />
	<arg name="camera_config" default="" />

	<!-- Transform each sensor's coordinate frame into world coordinate frame -->
	<arg name="fixed_frame" default="base_link" />
	<arg name="lidar_frame" default="$(arg lidar_model)" />
	<arg name="camera_frame" default="head_camera" />
	<arg name="radar_frame" default="ti_mmwave_pcl" />


	<include if="$(arg use_camera)" file="$(find usb_cam)/launch/usb_cam.launch">
		<arg name="show_image_view" value="$(arg show_image_view)" />
		<arg name="camera_yaml" value="$(arg camera_config)" />
	</include>

	<include if="$(arg use_radar)" file="$(find ti_mmwave_rospkg)/launch/radar.launch">
		<arg name="radar_cfg" value="$(arg radar_cfg)" />
	</include>

	<include if="$(arg use_lidar)" file="$(find hesai_lidar)/launch/hesai_lidar.launch">
		<arg name="lidar_type" value="$(arg lidar_model)" />
		<arg name="frame_id" value="$(arg lidar_model)" />
		<arg name="lidar_correction_file" value="$(arg lidar_correction_file)" />
		<arg name="server_ip" value="$(arg lidar_ip)" />
	</include>


	<node pkg="tf2_ros" type="static_transform_publisher" name="tf_cam"
	      args="0 0 0 0 0 0 $(arg fixed_frame) $(arg camera_frame)"/>

	<node pkg="tf2_ros" type="static_transform_publisher" name="tf_lidar"
	      args="0.20 0.00 0.10 0 0 0 $(arg fixed_frame) $(arg lidar_frame)"/>

	<node pkg="tf2_ros" type="static_transform_publisher" name="tf_radar"
	      args="0.1 0 -0.05 0 0 0 $(arg fixed_frame) $(arg radar_frame)"/>

  	<node if="$(arg show_rviz)" pkg="rviz" type="rviz" name="rviz" args="-d $(find use_sensors)/launch/sensors.rviz"/>
</launch>